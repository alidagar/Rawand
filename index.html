<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Rawand Optical - القائمة</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');
        body { font-family: 'Tajawal', sans-serif; background: #f8fafc; }
    </style>
</head>
<body>

    <header class="bg-white border-b p-4 sticky top-0 z-50 flex justify-between items-center shadow-sm">
        <img src="https://assets.softr-files.com/applications/1332b07e-2803-4ca2-961e-48de84f7f376/assets/c5680a02-6638-4d63-9827-84c7e087b62b.png" class="h-8">
        <span class="font-bold text-[#063356]">قائمة الأسعار</span>
    </header>

    <div class="p-4 max-w-2xl mx-auto">
        <div class="flex gap-2 overflow-x-auto pb-4 mb-4">
            <button onclick="loadTab('204294561')" class="bg-[#063356] text-white px-6 py-2 rounded-xl text-sm font-bold">Zeiss</button>
            <button onclick="loadTab('1241908852')" class="bg-white border px-6 py-2 rounded-xl text-sm font-bold">Hoya</button>
            <button onclick="loadTab('1796541571')" class="bg-white border px-6 py-2 rounded-xl text-sm font-bold text-blue-600">Contact Lenses</button>
        </div>

        <div id="displayArea" class="space-y-4">
            <p class="text-center py-10 text-gray-400">اختر ماركة لعرض الأسعار</p>
        </div>
    </div>

    <script>
        const sheetId = '11rfaJLxUx5CIc_znlntQ3udyqPujSAPXFFRFjAsePlk';

        async function loadTab(gid) {
            const area = document.getElementById('displayArea');
            area.innerHTML = '<p class="text-center py-10">جاري التحميل...</p>';
            
            // الرابط المباشر الذي لا يمكن لجوجل منعه
            const url = `https://docs.google.com/spreadsheets/d/${sheetId}/pub?gid=${gid}&output=csv`;

            try {
                const response = await fetch(url);
                const data = await response.text();
                
                // تحويل البيانات من نص إلى صفوف
                const rows = data.split('\n').slice(1); // تجاهل السطر الأول
                area.innerHTML = '';

                rows.forEach(row => {
                    const cols = row.split(',');
                    if (cols.length > 1) {
                        area.innerHTML += `
                            <div class="bg-white p-4 rounded-2xl shadow-sm border flex justify-between items-center">
                                <div>
                                    <h3 class="font-bold text-gray-800">${cols[0].replace(/"/g, '')}</h3>
                                    <p class="text-xs text-gray-500">${cols[2] ? cols[2].replace(/"/g, '') : ''}</p>
                                </div>
                                <div class="text-[#063356] font-black">${cols[1] ? cols[1].replace(/"/g, '') : '--'} JOD</div>
                            </div>
                        `;
                    }
                });
            } catch (error) {
                area.innerHTML = '<p class="text-center text-red-500">حدث خطأ في جلب البيانات</p>';
            }
        }

        // تشغيل أول ماركة تلقائياً
        loadTab('204294561');
    </script>
</body>
</html>
