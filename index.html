<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rawand Optical | Price List</title>
    <link rel="apple-touch-icon" href="https://assets.softr-files.com/applications/1332b07e-2803-4ca2-961e-48de84f7f376/assets/c34235fe-b50f-4223-af79-8554e3437b9f.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap');
        body { font-family: 'Tajawal', sans-serif; background-color: #f4f7fb; }
        .active-tab { background-color: #063356 !important; color: white !important; transform: scale(1.05); box-shadow: 0 4px 15px rgba(6, 51, 86, 0.2); }
        .lens-card { transition: all 0.3s ease; border-radius: 1.5rem; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="pb-10 text-right">

    <header class="bg-white sticky top-0 z-50 border-b border-gray-100 p-4 shadow-sm flex justify-between items-center">
        <img src="https://assets.softr-files.com/applications/1332b07e-2803-4ca2-961e-48de84f7f376/assets/c5680a02-6638-4d63-9827-84c7e087b62b.png" class="h-10">
        <div class="text-left font-black text-[#063356]">RAWAND OPTICAL</div>
    </header>

    <main class="max-w-4xl mx-auto px-4 mt-6">
        <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©..." 
            class="w-full p-4 rounded-2xl shadow-lg border-none mb-6 outline-none focus:ring-2 focus:ring-[#063356]">

        <div id="tabsContainer" class="flex gap-2 overflow-x-auto pb-4 no-scrollbar mb-6"></div>

        <div id="cardsGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="col-span-full text-center py-20 text-gray-400 font-bold animate-bounce">Ø¬Ø§Ø±ÙŠ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…Ø­Ø¯Ø«Ø©...</div>
        </div>
    </main>

<script>
    const sheetId = '11rfaJLxUx5CIc_znlntQ3udyqPujSAPXFFRFjAsePlk';
    // ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ù€ Tabs ÙÙŠ Ø§Ù„Ø´ÙŠØª Ø¨Ø§Ù„Ù…Ù„ÙŠ
    const tabs = ['Zeiss', 'Hoya', 'Nova', 'Divel', 'Synchrony', 'Local Lenses', 'Contact Lenses'];
    let currentData = [];

    async function loadData(tabName) {
        const grid = document.getElementById('cardsGrid');
        grid.innerHTML = '<div class="col-span-full text-center py-20 text-gray-400 font-bold">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ' + tabName + '...</div>';
        
        // Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø³Ø­Ø±ÙŠ Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ€ CSV (Ø£Ø¶Ù…Ù† Ø·Ø±ÙŠÙ‚Ø© Ù„Ù„Ø±Ø¨Ø·)
const url = `https://docs.google.com/spreadsheets/d/${sheetId}/pub?output=csv&gid=${getGid(tabName)}`;

// ÙˆØ£Ø¶Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„ØµØºÙŠØ±Ø© ÙÙŠ Ø£Ø³ÙÙ„ Ø§Ù„ÙƒÙˆØ¯ Ù‚Ø¨Ù„ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù€ <script>
function getGid(name) {
    const gids = {
        'Zeiss': '204294561',
        'Hoya': '1241908852',
        'Nova': '1613947230',
        'Divel': '1802967119',
        'Synchrony': '1249767351',
        'Local Lenses': '300753051',
        'Contact Lenses': '1796541571'
    };
    return gids[name] || '0';
}        
        try {
            const response = await fetch(url);
            const data = await response.text();
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø£Ø³Ø·Ø±
            const rows = data.split('\n').map(r => r.split(',').map(c => c.replace(/^"|"$/g, '')));
            const headers = rows[0];
            const items = rows.slice(1).map(row => {
                let obj = {};
                headers.forEach((h, i) => { if(row[i]) obj[h] = row[i]; });
                return obj;
            });

            currentData = items;
            render(items);
        } catch (e) {
            grid.innerHTML = '<div class="col-span-full text-center py-10 text-red-500 font-bold">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±Ø¨Ø·! ØªØ£ÙƒØ¯ Ù…Ù† Share -> Publish to web Ù„Ù„Ù…Ø³ØªÙ†Ø¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.</div>';
        }
    }

    function render(data) {
        const grid = document.getElementById('cardsGrid');
        if (!data || data.length === 0) { grid.innerHTML = '<div class="col-span-full text-center py-10">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙØ§Ø±ØºØ©</div>'; return; }

        grid.innerHTML = data.map(item => {
            const keys = Object.keys(item);
            // Ø°ÙƒØ§Ø¡ ÙÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø³Ø¹Ø± Ù…Ù‡Ù…Ø§ Ø§Ø®ØªÙ„Ù Ø§Ù„ØªØ±ØªÙŠØ¨
            const name = item[keys[0]] || "Ù…Ù†ØªØ¬";
            const price = Object.values(item).find(v => !isNaN(parseFloat(v)) && v.length < 6) || "--";

            return `
                <div class="lens-card bg-white p-6 shadow-md border border-gray-50 flex flex-col hover:shadow-xl transition-all">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-lg font-bold text-[#063356] leading-tight">${name}</h3>
                        <div class="bg-blue-50 text-[#063356] px-4 py-1 rounded-2xl font-black text-sm whitespace-nowrap">
                            ${price} <small class="text-[10px]">JOD</small>
                        </div>
                    </div>
                    <div class="space-y-2 mt-auto border-t pt-3">
                        ${keys.map(k => (item[k] && item[k] !== price && item[k] !== name) ? `
                            <div class="flex justify-between text-xs">
                                <span class="text-gray-400 font-medium">${k}:</span>
                                <span class="text-gray-700 font-bold">${item[k]}</span>
                            </div>
                        ` : '').join('')}
                    </div>
                </div>
            `;
        }).join('');
    }

    // Ø¨Ù†Ø§Ø¡ Ø§Ù„ØªØ§Ø¨Ø§Øª
    const tBox = document.getElementById('tabsContainer');
    tabs.forEach((tab, i) => {
        const btn = document.createElement('button');
        btn.innerText = tab === 'Contact Lenses' ? 'Ø¹Ø¯Ø³Ø§Øª Ù„Ø§ØµÙ‚Ø© ğŸ‘ï¸' : tab;
        btn.className = `brand-btn whitespace-nowrap px-6 py-3 rounded-2xl font-bold text-sm transition-all border-2 border-transparent ${i===0?'active-tab':'bg-white text-gray-500 shadow-sm'}`;
        btn.onclick = () => {
            document.querySelectorAll('.brand-btn').forEach(b => b.classList.remove('active-tab'));
            btn.classList.add('active-tab');
            loadData(tab);
            btn.scrollIntoView({ behavior: 'smooth', inline: 'center' });
        };
        tBox.appendChild(btn);
    });

    document.getElementById('searchInput').oninput = (e) => {
        const val = e.target.value.toLowerCase();
        render(currentData.filter(i => Object.values(i).some(v => String(v).toLowerCase().includes(val))));
    };

    loadData(tabs[0]);
</script>
</body>
</html>

